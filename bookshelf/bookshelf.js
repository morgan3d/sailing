{

let bookshelves = [{
   title: "Technique",
   contents:
[
{title:  "Self Sufficient Sailor",
 url:    "https://amzn.to/3J1JDyk",
 author: "Pardey and Pardey 2019",
 image:  "amzn://51G56ZlGpQL"},

{title:  "Advanced First Aid Afloat",
 url:    "https://amzn.to/3T9LjKN", 
 author: "Eastman and Levinson 2009",
 image:  "amzn://41We3uQvHnL"
},
 
{title:  "Modern Marine Weather",
 url:    "https://amzn.to/3ywCvFC",
 author: "Burch 2018",
 image:  "amzn://51PjMu3+ayL"},
 
{title:  'Storm Tactics Handbook',
 url:    "https://amzn.to/3ZTHpbc", 
 author: "Pardey and Pardey 2008",
 image:  "amzn://51Xhjyc-TpL"},

{title:  'Expert Sailing Skills',
 url:    'https://amzn.to/43WqOFV', 
 author: 'Cunliffe 2012',
 image:  'amzn://51lrXmBICmL'},    

{title:  'Getting Started in Sailboat Racing',
 url: 'https://amzn.to/3PB1ktB',
 author: 'Cort and Stearns 2013',
 image: 'amzn://51t6Ry+uPLL'
},

    {
        title: 'Illustrated Sail and Rig Tuning',
        url: 'https://amzn.to/44TVqIS',
        author: 'Dedekam 2000',
        image: 'amzn://51WgNZJd-+L'
    },

    {
        title: "The Voyager's Handbook",
        url: 'https://amzn.to/3KsFJQP',
        author: 'Leonard 2006',
        image: 'amzn://5117N4IiAyL'
    },

    {
        title: 'The Annapolis Book of Seamanship',
        url: 'https://amzn.to/45ifWmb',
        author: 'Rousmaniere 2014',
        image: 'amzn://514pEmp10aL'
    },
    
{title:  'Stress-Free Sailing',
 url:    'https://amzn.to/426xzVc', 
 author: 'Wells 2021',
 image:  'amzn://51ixiRLFjmL'},


{title: "The Cruiser's Handbook of Fishing",
 url: 'https://amzn.to/3rlYxuk',
 author: "Bannerot and Bannerot 2003",
 image: 'amzn://51t3IOSFRSL'}
]},



{ title: "Maintenance",
 contents: [
{title:  "Boatowner's Mechanical and Electrical Manual",
 author: 'Calder 2015',
 image:  'amzn://511OBa4bYnL',
 url:    'https://amzn.to/3l3fsix'},
 
{title:  'Marine Diesel Engines',
 author: 'Calder 2006',
 image:  'amzn://510qvMetq9L',
 url:    'https://amzn.to/3LfE16j'},

{title:  "The Complete Rigger's Apprentice",
 url:    "https://amzn.to/3p0IL7l",
 author: "Toss 2016",
 image:  "amzn://51g+We2verL"},

{title:  "Get Rid of Boat Odors",
 url:    "https://amzn.to/3T7qFuR",
 author: "Hall 2016",
 image:  "amzn://61Bp5JcvULL"},

{title:   "Fiberglass Boat Repair &amp; Maintenance",
 url:     "https://amzn.to/3K0Iojt",
 image:   "amzn://81Ws9q0Z5vL",
 author:  "(or free [PDF version](https://www.westsystem.com/wp-content/uploads/Fiberglass-Manual-2015.pdf))"}
]},



{title: "Memoir/History",
 contents: [
 {title:   "Sailing Alone Around the World",
 url:     "https://amzn.to/425xjpt",
 author:  "Slocum",
  image:   "amzn://5114A7v9ZVL"},
 
{title:   "Two Years Before the Mast",
 url:     "https://amzn.to/3ZXzWYB",
 author:  "Dana",
 image:   "amzn://51xbP60J+BL"},
 
{title:   "Kon-Tiki",
 url:     "https://amzn.to/3YDNKGU",
 author:  "Heyerdahl",
 image:   "amzn://517FLjuDvUL"},
 
{title:   "Song of the Sirens",
 url:     "https://amzn.to/3mGSHkS",
 author:  "Gann",
 image:   "amzn://41fQaVb53BL"},
 
{title:   "The Curve of Time",
 url:     "https://amzn.to/3JZW0LT",
 author:  "Blanchet",
 image:   "amzn://51vfYtU1ksL"},
 
{title:   "Maiden Voyage",
 url:     "https://amzn.to/3yxdWZa",
 author:  "Aebi and Brennan",
 image:   "amzn://41E0uEd0EwL"},
 
{title:   "Mischief series",
 url:     "https://amzn.to/3Fi2EM9",
 author:  "Tilman",
 image:   "amzn://5102+WxuCvL"},
 
{title:   "Gipsy Moth Circles the World",
 url:     "https://amzn.to/3kZZeqx",
 author:  "Chichester",
 image:   "amzn://51mwVB6eFzL"},
 
{title:   "Dove",
 url:     "https://amzn.to/425yCET",
 author:  "Graham and Gill",
 image:   "amzn://51S6kugL58L"},
 
{title:   "The Log from the Sea of Cortez",
 url:     "https://amzn.to/3ZMtTqs",
 author:  "Steinbeck",
 image:   "amzn://41F+61z7+0L"},
 
{title:   "Seraffyn's European Adventure",
 url:     "https://amzn.to/3LiRxGE",
 author:  "Pardey and Pardey",
 image:   "amzn://51-irzWlToL"},
 
{title:   "Passage to Juneau",
 url:     "https://amzn.to/3ZXBS3x",
 author:  "Raban",
 image:   "amzn://41-WutnD8tL"},
 
{title:   "The Endurance: Shackleton's Incredible Voyage",
 url:     "https://amzn.to/3J42WXY",
 author:  "Lansing",
 image:   "amzn://51nbCCBDUEL"},
 
{title:   "An Embarrassment of Mangoes",
 url:     "https://amzn.to/426R7ck",
 author:  "Vanderhoof",
 image:   "amzn://51kT60sa7hL"},
 
{title:   "The Mirror of the Sea",
 url:     "https://amzn.to/40LnknV",
 author:  "Conrad",
 image:   "amzn://51da9sx6CZL"},
 
{title:   "A Voyage for Madmen",
 url:     "https://amzn.to/3ZuU8jU",
 author:  "Nichols",
 image:   "amzn://51YDxZ8YibL"},

{title: "Scapa Ferry",
 url: "https://amzn.to/3ZWyGEE",
 author: "Antony Bridges",
 image: "https://m.media-amazon.com/images/I/51MQL+p6pDL._SX306_BO1,204,203,200_.jpg"},

{title: "Once is Enough",
 url: "https://amzn.to/3zMdrej",
 author: "Miles Smeeton",
 image: "amzn://51tkwDv66ZL"},

     {title:'Flirting with Mermaides',
      url: 'https://amzn.to/47ATjM3',
      author: 'John Kretschmer',
      image: 'amzn://519k-awRjQL'}
     
 ]},


                   
{title:"Historical Fiction",
 contents:[
     
{title:   "Aubrey-Maturin series",
 url:     "https://amzn.to/3MgO8s2",
 author:  "O'Brian",
 image:   "amzn://51hXuO2d4UL"},
 
{title:   "The Privateer",
 url:     "https://amzn.to/401NAKC",
 author:  "Tey",
 image:   "amzn://41-XKCNXzgL"},
 
{title:   "The Riddle of the Sands",
 url:     "https://amzn.to/3mF3Lip",
 author:  "Childers",
 image:   "amzn://41Sr7H2SS9L"},

{title:   "The Voyage of the Narwhal",
 url:     "https://amzn.to/40V4TgS",
 author:  "Barrett",
 image:   "amzn://41NIkJe4aeL"},

{title: "White-Jacket",
      url: "https://amzn.to/3nF3YCP",
      author: "Melville",
      image: "amzn://51Wq6BfpYPL"},
     
{title:   "Mutiny on the Bounty trilogy",
 url:     "https://amzn.to/3M3l6fv",
 author:  "Nordhoff and Hall ",
 image:   "amzn://51K1a7HzQzL"},
 
{title:   "Treasure Island",
 url:     "https://amzn.to/3TS341T",
 author:  "Stephenson",
 image:   "amzn://51MQprSMHFL"},
 
{title:   "Moby Dick",
 url:     "https://amzn.to/40F0xdG",
 author:  "Melville",
 image:   "amzn://412cEegdD5L"},
 
{title:   "Swallows and Amazons series",
 url:     "https://amzn.to/3JV8Mv5",
 author:  "Ransome",
 image:   "amzn://51fzbOdCdYL"},

{title:   "Frenchman's Creek",
 url:     "https://www.amazon.com/Frenchmans-Creek-Daphne-du-Maurier-ebook/dp/B00GW4JQY4",
 author:  "du Maurier",
 image:   "amzn://51lc7yrkxeL"},

{title:   "Hornblower saga",
 url:     "https://amzn.to/3P6Xl7T",
 author:  "Forester",
 image:   "amzn://51gaKLrwAFL"},

 ]}];

let src = '';
for (shelf of bookshelves) {
    src += `\n# ${shelf.title}\n<table>`;
    let imgSrc = '';
    let txtSrc = '';
    for (let b = 0; b < shelf.contents.length; ++b) {
       let {title, author, image, url} = shelf.contents[b];
       
       image = image.replace(/amzn:\/\/(.*)/, "https://m.media-amazon.com/images/I/$1._SX260_.jpg");
       
       imgSrc += `<td width=33%><center><a href="${url}">![](${image} class="book")</a></center></td>`;
       txtSrc += `<td>[_${title}_](${url})<br>${author}</td>`;
    
       // Commit the row
       if (b % 3 === 2 || b === shelf.contents.length - 1) {
          src += `<tr valign=top>${imgSrc}</tr><tr valign=top>${txtSrc}</tr><tr><td><br></td></tr>`;
          txtSrc = imgSrc = '';
       }
    }
    src += '</table>';
}

document.write(src);
}
